<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parker VIP Store</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            background-color: #121212; /* Глубокий черный */
            color: #E0E0E0;
            font-family: 'Helvetica Neue', sans-serif;
            margin: 0;
            padding: 10px;
            padding-bottom: 80px; /* Место для кнопки внизу */
        }
        h1 {
            text-align: center;
            color: #C5A059; /* Золото Parker */
            font-size: 20px;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        /* СЕТКА ТОВАРОВ (2 в ряд) */
        .grid-container {
            display: grid;
            grid-template-columns: 1fr 1fr; /* Две колонки */
            gap: 15px;
        }
        .card {
            background-color: #1E1E1E;
            border-radius: 12px;
            padding: 10px;
            text-align: center;
            border: 1px solid #333;
            transition: transform 0.1s;
        }
        .card:active {
            transform: scale(0.98);
        }
        .card img {
            width: 100%;
            height: 120px;
            object-fit: contain;
            background-color: #fff;
            border-radius: 8px;
            margin-bottom: 8px;
        }
        .name {
            font-size: 13px;
            margin-bottom: 5px;
            color: #fff;
            height: 32px;
            overflow: hidden;
        }
        .price {
            color: #C5A059;
            font-weight: bold;
            font-size: 14px;
            margin-bottom: 8px;
        }
        .btn-add {
            background-color: #C5A059;
            color: #000;
            border: none;
            padding: 8px;
            width: 100%;
            border-radius: 6px;
            font-weight: bold;
            cursor: pointer;
        }
        /* ГЛАВНАЯ КНОПКА (Telegram Style) */
        #main-btn {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            padding: 15px;
            background-color: #31b545; /* Зеленый Telegram */
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            display: none; /* Скрыта пока корзина пуста */
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
        }
    </style>
</head>
<body>

    <h1>Parker Collection</h1>

    <div class="grid-container" id="products">
        </div>

    <button id="main-btn" onclick="sendOrder()">Оформить заказ</button>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand(); // Раскрыть на весь экран

        // БАЗА ДАННЫХ ТОВАРОВ (JS)
        const products = [
            {id: 1, name: "Parker Sonnet Black", price: 24500, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/2/23/Parker_Sonnet_Fountain_Pen.jpg/640px-Parker_Sonnet_Fountain_Pen.jpg"},
            {id: 2, name: "Parker Duofold Red", price: 68000, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/f/f0/Parker_Duofold_Centennial.jpg/640px-Parker_Duofold_Centennial.jpg"},
            {id: 3, name: "Jotter XL Gold", price: 3500, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/52/Parker_Jotter.jpg/640px-Parker_Jotter.jpg"},
            {id: 4, name: "Parker IM Metal", price: 4200, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/7/70/Parker_Vector_and_Parker_IM.jpg/640px-Parker_Vector_and_Parker_IM.jpg"},
            {id: 5, name: "Чернила Quink", price: 950, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/c/c8/Parker_Quink_Blue_Black.jpg/640px-Parker_Quink_Blue_Black.jpg"},
            {id: 6, name: "Стержень (M)", price: 850, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/52/Parker_Jotter.jpg/640px-Parker_Jotter.jpg"}
        ];

        let cart = [];
        const container = document.getElementById('products');
        const mainBtn = document.getElementById('main-btn');

        // ГЕНЕРАЦИЯ КАРТОЧЕК
        products.forEach(item => {
            const card = document.createElement('div');
            card.className = 'card';
            card.innerHTML = `
                <img src="${item.img}" alt="${item.name}">
                <div class="name">${item.name}</div>
                <div class="price">${item.price} ₽</div>
                <button class="btn-add" onclick="addToCart(${item.id}, '${item.name}', ${item.price})">В КОРЗИНУ</button>
            `;
            container.appendChild(card);
        });

        function addToCart(id, name, price) {
            cart.push({id, name, price});
            updateButton();
            tg.HapticFeedback.impactOccurred('light'); // Вибрация при нажатии
        }

        function updateButton() {
            if (cart.length > 0) {
                const total = cart.reduce((sum, item) => sum + item.price, 0);
                mainBtn.style.display = 'block';
                mainBtn.innerText = `Купить ${cart.length} т. за ${total} ₽`;
            } else {
                mainBtn.style.display = 'none';
            }
        }

        function sendOrder() {
            // Отправляем данные обратно в Python бот
            tg.sendData(JSON.stringify(cart));
        }
    </script>
</body>
</html>